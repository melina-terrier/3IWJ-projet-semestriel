(function(l){typeof define=="function"&&define.amd?define(l):l()})(function(){"use strict";document.addEventListener("DOMContentLoaded",()=>{const l=document.getElementById("add-to-menu"),d=document.querySelector(".menu-list"),s=document.getElementById("menu");if(l&&d&&s){let a=function(n){return Array.from(n.children).map((e,t)=>({id:e.dataset.id,title:e.querySelector("input").value.trim(),url:e.dataset.url,position:t+1}))},f=function(n){const e=document.createElement("li");e.className="menu-item",e.dataset.id=n.id,e.dataset.url=n.url;const t=document.createElement("input");t.type="text",t.value=n.title,t.addEventListener("input",u);const o=document.createElement("button");return o.textContent="Supprimer",o.addEventListener("click",()=>{e.parentElement.removeChild(e),u()}),e.appendChild(t),e.appendChild(o),e.draggable=!0,e.addEventListener("dragstart",m),e.addEventListener("dragover",g),e.addEventListener("drop",p),e},m=function(n){n.dataTransfer.setData("text/plain",n.target.dataset.id),n.dataTransfer.effectAllowed="move",this.classList.add("dragging")},g=function(n){n.preventDefault();const e=document.querySelector(".dragging");if(e&&this!==e){const t=this.getBoundingClientRect();n.clientY-t.top>t.height/2?this.classList.add("drag-over"):this.classList.remove("drag-over")}},p=function(n){n.preventDefault();const e=n.dataTransfer.getData("text/plain"),t=document.querySelector(`[data-id='${e}']`);if(t&&t!==this){const o=this.getBoundingClientRect(),h=n.clientY-o.top>o.height/2?1:0;t.classList.remove("dragging"),h===1?this.parentNode.insertBefore(t,this.nextSibling):this.parentNode.insertBefore(t,this),u()}this.classList.remove("drag-over")},u=function(){const n=a(d);s.value=JSON.stringify(n)};const i=s.value;JSON.parse(i).forEach(n=>{const e=document.createElement("li");e.className="menu-item",e.dataset.id=n.id,e.dataset.url=n.url;const t=document.createElement("input");t.type="text",t.value=n.title,t.addEventListener("input",u);const o=document.createElement("button");o.textContent="Supprimer",o.addEventListener("click",()=>{e.parentElement.removeChild(e),u()}),e.appendChild(t),e.appendChild(o),e.draggable=!0,e.addEventListener("dragstart",m),e.addEventListener("dragover",g),e.addEventListener("drop",p),d.appendChild(e)}),l&&l.addEventListener("click",n=>{n.preventDefault(),document.querySelectorAll('input[type="checkbox"]:checked').forEach(t=>{const o=document.querySelector(`label[for='${t.id}']`);if(o){const v=f({id:t.id,title:o.textContent,url:t.getAttribute("url"),isCategory:!1});d.appendChild(v),t.checked=!1}}),u()})}const c=document.querySelector('[name="position"]');c&&c.addEventListener("change",()=>{const i=c.value.toLowerCase();if(console.log(i),i==="horizontal"){const r=document.querySelector('[name="horizontal-alignement"]');r&&(r.style.display="block",console.log(r))}else if(i==="vertical"||i==="burger"){const r=document.querySelector('[name="vertical-alignement"]');r&&(r.style.display="block",console.log(r))}})}),document.addEventListener("DOMContentLoaded",()=>{const l=document.getElementById("openMediaModal"),d=document.getElementById("mediaModal"),s=document.querySelector(".close"),c=document.getElementById("saveMedia");if(l&&c&&s&&d){let r=function(a){console.log("test"),a.preventDefault();var f=new FormData(this);$.ajax({url:"/Controllers/Media.php",type:"POST",data:f,processData:!1,contentType:!1,success:function(m){console.log("Réponse du serveur :",m),alert("Données envoyées avec succès !")},error:function(m,g,p){console.error("Erreur lors de l'envoi des données :",p),alert("Erreur lors de l'envoi des données. Veuillez réessayer.")}})};l.addEventListener("click",a=>{a.preventDefault(),d.style.display="block"}),s.addEventListener("click",a=>{a.preventDefault,d.style.display="none"}),window.addEventListener("click",a=>{a.preventDefault,a.target===d&&(d.style.display="none")}),c.addEventListener("click",a=>{a.preventDefault});const i=d.querySelector("form#media-form");console.log(i),i.addEventListener("submit",r)}})});
