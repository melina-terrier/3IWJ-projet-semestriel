(function(s){typeof define=="function"&&define.amd?define(s):s()})(function(){"use strict";window.onload=()=>{document.querySelectorAll(".navbar__toggle").forEach(s=>{s.addEventListener("click",r=>{console.log("click");const c=r.target;c.classList.toggle("active");const l=c.closest(".navbar");l.classList.toggle("toggled");const n=l.querySelector(".navbar__toggle-content");l.classList.contains("toggled")?n.style.maxHeight=n.scrollHeight+"px":n.style.maxHeight="0"})})},document.addEventListener("DOMContentLoaded",()=>{const s=document.getElementById("add-to-menu"),r=document.querySelector(".menu-list"),c=document.getElementById("menu");if(s&&r&&c){let d=function(o){return Array.from(o.children).map((e,t)=>({id:e.dataset.id,title:e.querySelector("input").value.trim(),url:e.dataset.url,position:t+1}))},u=function(o){const e=document.createElement("li");e.className="menu-item",e.dataset.id=o.id,e.dataset.url=o.url;const t=document.createElement("input");t.type="text",t.value=o.title,t.addEventListener("input",p);const i=document.createElement("button");return i.textContent="Supprimer",i.addEventListener("click",()=>{e.parentElement.removeChild(e),p()}),e.appendChild(t),e.appendChild(i),e.draggable=!0,e.addEventListener("dragstart",m),e.addEventListener("dragover",f),e.addEventListener("drop",g),e},m=function(o){o.dataTransfer.setData("text/plain",o.target.dataset.id),o.dataTransfer.effectAllowed="move",this.classList.add("dragging")},f=function(o){o.preventDefault();const e=document.querySelector(".dragging");if(e&&this!==e){const t=this.getBoundingClientRect();o.clientY-t.top>t.height/2?this.classList.add("drag-over"):this.classList.remove("drag-over")}},g=function(o){o.preventDefault();const e=o.dataTransfer.getData("text/plain"),t=document.querySelector(`[data-id='${e}']`);if(t&&t!==this){const i=this.getBoundingClientRect(),h=o.clientY-i.top>i.height/2?1:0;t.classList.remove("dragging"),h===1?this.parentNode.insertBefore(t,this.nextSibling):this.parentNode.insertBefore(t,this),p()}this.classList.remove("drag-over")},p=function(){const o=d(r);c.value=JSON.stringify(o)};const n=c.value;JSON.parse(n).forEach(o=>{const e=document.createElement("li");e.className="menu-item",e.dataset.id=o.id,e.dataset.url=o.url;const t=document.createElement("input");t.type="text",t.value=o.title,t.addEventListener("input",p);const i=document.createElement("button");i.textContent="Supprimer",i.addEventListener("click",()=>{e.parentElement.removeChild(e),p()}),e.appendChild(t),e.appendChild(i),e.draggable=!0,e.addEventListener("dragstart",m),e.addEventListener("dragover",f),e.addEventListener("drop",g),r.appendChild(e)}),s&&s.addEventListener("click",o=>{o.preventDefault(),document.querySelectorAll('input[type="checkbox"]:checked').forEach(t=>{const i=document.querySelector(`label[for='${t.id}']`);if(i){const v=u({id:t.id,title:i.textContent,url:t.getAttribute("url"),isCategory:!1});r.appendChild(v),t.checked=!1}}),p()})}const l=document.querySelector('[name="position"]');l&&l.addEventListener("change",()=>{const n=l.value.toLowerCase();if(console.log(n),n==="horizontal"){const a=document.querySelector('[name="horizontal-alignement"]');a&&(a.style.display="block",console.log(a))}else if(n==="vertical"||n==="burger"){const a=document.querySelector('[name="vertical-alignement"]');a&&(a.style.display="block",console.log(a))}})}),document.addEventListener("DOMContentLoaded",()=>{function s(n){const a=document.createElement("button");a.textContent="Supprimer",a.classList.add("remove-button"),a.addEventListener("click",()=>{n.parentNode.removeChild(n)}),n.appendChild(a)}function r(n){const a=document.getElementById(n),d=a.getAttribute("data-link"),u=document.getElementById(d);if(!a||!u){console.error(`Error: Button with ID "${n}" or container with ID "${u}" not found.`);return}let m=1;a.addEventListener("click",f=>{f.preventDefault();const g=u.cloneNode(!0),p=`${d}_${m}`;g.id=p,g.querySelectorAll("input").forEach(e=>{const t=e.getAttribute("name");if(t){const i=t.replace("0",m);e.setAttribute("name",i),e.value="",e.required=!0}}),s(g),u.parentNode.insertBefore(g,u.nextSibling),m++})}function c(n){let a=1,d=document.getElementById(`${n}_${a}`);for(;d;)d.querySelector(".remove-button")||s(d),console.log(d),a++,d=document.getElementById(`${n}_${a}`)}c("contact"),c("experience"),c("formation"),c("skill"),r("add-contact"),r("add-experience"),r("add-formation"),r("add-skill");function l(n){const d=document.getElementById(n).querySelectorAll("input");d.forEach(u=>{u.addEventListener("change",()=>{d.forEach(m=>{m.required=u.value!==""})})})}l("contact"),l("experience"),l("formation"),l("skill")}),document.addEventListener("DOMContentLoaded",()=>{const s=document.getElementById("openMediaModal"),r=document.getElementById("mediaModal"),c=document.querySelector(".close"),l=document.getElementById("saveMedia");if(s&&l&&c&&r){let a=function(d){console.log("test"),d.preventDefault();var u=new FormData(this);$.ajax({url:"/Controllers/Media.php",type:"POST",data:u,processData:!1,contentType:!1,success:function(m){console.log("Réponse du serveur :",m),alert("Données envoyées avec succès !")},error:function(m,f,g){console.error("Erreur lors de l'envoi des données :",g),alert("Erreur lors de l'envoi des données. Veuillez réessayer.")}})};s.addEventListener("click",d=>{d.preventDefault(),r.style.display="block"}),c.addEventListener("click",d=>{d.preventDefault,r.style.display="none"}),window.addEventListener("click",d=>{d.preventDefault,d.target===r&&(r.style.display="none")}),l.addEventListener("click",d=>{d.preventDefault});const n=r.querySelector("form#media-form");console.log(n),n.addEventListener("submit",a)}})});
